import{S as H,i as J,s as M,k as h,q as T,a as E,l as v,m as b,r as D,h as p,c as k,n as c,b as g,D as d,u as ee,L as A,R,G as V,K as re,e as le,E as S,F as I,y as B,z as F,A as O,g as C,d as W,B as j}from"./index.0569c376.js";import{a as ue}from"./axios.707ed124.js";import{c as ce,b as pe,a as ae,g as fe}from"./navigation.40338983.js";import{j as Z,p as x,k as G,l as ne,f as K,u as de,v as _e}from"./store.50882a15.js";function me(o){let e,t,a,s,i;return{c(){e=h("input"),this.h()},l(n){e=v(n,"INPUT",{type:!0,name:!0,id:!0,placeholder:!0,autocomplete:!0,class:!0}),this.h()},h(){c(e,"type","email"),c(e,"name","email"),c(e,"id","email"),c(e,"placeholder",t=`Type your ${o[0]}`),c(e,"autocomplete",a=`${o[0]}`),c(e,"class","sm:text-sm text-input svelte-12re45x")},m(n,r){g(n,e,r),R(e,o[1]),s||(i=[V(e,"input",o[4]),V(e,"change",o[2])],s=!0)},p(n,r){r&1&&t!==(t=`Type your ${n[0]}`)&&c(e,"placeholder",t),r&1&&a!==(a=`${n[0]}`)&&c(e,"autocomplete",a),r&2&&e.value!==n[1]&&R(e,n[1])},d(n){n&&p(e),s=!1,re(i)}}}function he(o){let e,t,a,s,i;return{c(){e=h("input"),this.h()},l(n){e=v(n,"INPUT",{type:!0,name:!0,id:!0,placeholder:!0,autocomplete:!0,class:!0}),this.h()},h(){c(e,"type","password"),c(e,"name","pwd"),c(e,"id","pwd"),c(e,"placeholder",t=`Type your ${o[0]}`),c(e,"autocomplete",a=`${o[0]}`),c(e,"class","sm:text-sm text-input svelte-12re45x")},m(n,r){g(n,e,r),R(e,o[1]),s||(i=[V(e,"input",o[3]),V(e,"change",o[2])],s=!0)},p(n,r){r&1&&t!==(t=`Type your ${n[0]}`)&&c(e,"placeholder",t),r&1&&a!==(a=`${n[0]}`)&&c(e,"autocomplete",a),r&2&&e.value!==n[1]&&R(e,n[1])},d(n){n&&p(e),s=!1,re(i)}}}function ve(o){let e,t,a,s,i;function n(u,f){if(u[0]==="Password")return he;if(u[0]==="Email")return me}let r=n(o),l=r&&r(o);return{c(){e=h("div"),t=h("label"),a=T(o[0]),i=E(),l&&l.c(),this.h()},l(u){e=v(u,"DIV",{class:!0});var f=b(e);t=v(f,"LABEL",{for:!0,class:!0});var _=b(t);a=D(_,o[0]),_.forEach(p),i=k(f),l&&l.l(f),f.forEach(p),this.h()},h(){c(t,"for",s=`${o[0]}`),c(t,"class"," svelte-12re45x"),c(e,"class","container svelte-12re45x")},m(u,f){g(u,e,f),d(e,t),d(t,a),d(e,i),l&&l.m(e,null)},p(u,[f]){f&1&&ee(a,u[0]),f&1&&s!==(s=`${u[0]}`)&&c(t,"for",s),r===(r=n(u))&&l?l.p(u,f):(l&&l.d(1),l=r&&r(u),l&&(l.c(),l.m(e,null)))},i:A,o:A,d(u){u&&p(e),l&&l.d()}}}function be(o,e,t){let{field:a}=e,s;const i=()=>{a==="Email"?Z.set(s):x.set(s)};function n(){s=this.value,t(1,s)}function r(){s=this.value,t(1,s)}return o.$$set=l=>{"field"in l&&t(0,a=l.field)},[a,s,i,n,r]}class oe extends H{constructor(e){super(),J(this,e,be,ve,M,{field:0})}}function ie(o){let e,t,a,s,i,n,r;return{c(){e=h("div"),t=h("div"),a=T(o[0]),s=E(),i=h("div"),this.h()},l(l){e=v(l,"DIV",{class:!0});var u=b(e);t=v(u,"DIV",{class:!0});var f=b(t);a=D(f,o[0]),f.forEach(p),s=k(u),i=v(u,"DIV",{class:!0}),b(i).forEach(p),u.forEach(p),this.h()},h(){c(t,"class","message svelte-1arhpoc"),c(i,"class",n=I(`progress-bar ${o[1]==="true"?"progress":"complete"}`)+" svelte-1arhpoc"),c(e,"class",r=I(`container ${o[1]==="true"?"open-popup":"close-popup"}`)+" svelte-1arhpoc")},m(l,u){g(l,e,u),d(e,t),d(t,a),d(e,s),d(e,i)},p(l,u){u&1&&ee(a,l[0]),u&2&&n!==(n=I(`progress-bar ${l[1]==="true"?"progress":"complete"}`)+" svelte-1arhpoc")&&c(i,"class",n),u&2&&r!==(r=I(`container ${l[1]==="true"?"open-popup":"close-popup"}`)+" svelte-1arhpoc")&&c(e,"class",r)},d(l){l&&p(e)}}}function ge(o){let e,t=o[1]!==""&&ie(o);return{c(){t&&t.c(),e=le()},l(a){t&&t.l(a),e=le()},m(a,s){t&&t.m(a,s),g(a,e,s)},p(a,[s]){a[1]!==""?t?t.p(a,s):(t=ie(a),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:A,o:A,d(a){t&&t.d(a),a&&p(e)}}}function $e(o,e,t){let a;S(o,G,i=>t(1,a=i));let{message:s}=e;return o.$$set=i=>{"message"in i&&t(0,s=i.message)},[s,a]}class we extends H{constructor(e){super(),J(this,e,$e,ge,M,{message:0})}}const ye=async(o,e,t)=>{let a;if(o==="SignUp")a=await ce(ae,e,t);else if(o==="User Login")a=await pe(ae,e,t);else if(o==="Admin Login"&&!(ne.email===e&&ne.password===t))throw new Error("Invalid email or password");return a};function Ee(o){let e,t,a,s,i,n,r;return{c(){e=h("div"),t=T("Already have an account?"),a=E(),s=h("button"),i=T("Login"),this.h()},l(l){e=v(l,"DIV",{});var u=b(e);t=D(u,"Already have an account?"),u.forEach(p),a=k(l),s=v(l,"BUTTON",{class:!0});var f=b(s);i=D(f,"Login"),f.forEach(p),this.h()},h(){c(s,"class","signup svelte-quz334")},m(l,u){g(l,e,u),d(e,t),g(l,a,u),g(l,s,u),d(s,i),n||(r=V(s,"click",o[3]),n=!0)},p:A,d(l){l&&p(e),l&&p(a),l&&p(s),n=!1,r()}}}function ke(o){let e,t,a,s,i,n,r;return{c(){e=h("div"),t=T("Don't have an account?"),a=E(),s=h("button"),i=T("SignUp"),this.h()},l(l){e=v(l,"DIV",{});var u=b(e);t=D(u,"Don't have an account?"),u.forEach(p),a=k(l),s=v(l,"BUTTON",{class:!0});var f=b(s);i=D(f,"SignUp"),f.forEach(p),this.h()},h(){c(s,"class","signup svelte-quz334"),s.disabled=o[0]},m(l,u){g(l,e,u),d(e,t),g(l,a,u),g(l,s,u),d(s,i),n||(r=V(s,"click",o[2]),n=!0)},p(l,u){u&1&&(s.disabled=l[0])},d(l){l&&p(e),l&&p(a),l&&p(s),n=!1,r()}}}function Ue(o){let e,t;function a(n,r){return n[1]!=="SignUp"?ke:Ee}let s=a(o),i=s(o);return{c(){e=h("div"),i.c(),this.h()},l(n){e=v(n,"DIV",{class:!0});var r=b(e);i.l(r),r.forEach(p),this.h()},h(){c(e,"class",t=I(`noaccount ${o[1]==="SignUp"?"hidden":""}`)+" svelte-quz334")},m(n,r){g(n,e,r),i.m(e,null)},p(n,[r]){s===(s=a(n))&&i?i.p(n,r):(i.d(1),i=s(n),i&&(i.c(),i.m(e,null))),r&2&&t!==(t=I(`noaccount ${n[1]==="SignUp"?"hidden":""}`)+" svelte-quz334")&&c(e,"class",t)},i:A,o:A,d(n){n&&p(e),i.d()}}}function Ie(o,e,t){let a;S(o,K,r=>t(1,a=r));let{disable_button:s}=e;const i=()=>{K.set("SignUp"),window.location.reload()},n=()=>{K.set("User Login"),window.location.reload()};return o.$$set=r=>{"disable_button"in r&&t(0,s=r.disable_button)},[s,a,i,n]}class Te extends H{constructor(e){super(),J(this,e,Ie,Ue,M,{disable_button:0})}}function De(o){let e,t,a,s,i,n,r,l,u,f,_,L,y,Q,P,X,U,q,Y,te;return t=new we({props:{message:o[0]}}),u=new oe({props:{field:"Email"}}),_=new oe({props:{field:"Password"}}),U=new Te({props:{disable_button:o[1]}}),{c(){e=h("div"),B(t.$$.fragment),a=E(),s=h("div"),i=h("div"),n=T(o[2]),r=E(),l=h("div"),B(u.$$.fragment),f=E(),B(_.$$.fragment),L=E(),y=h("button"),Q=T("Next"),X=E(),B(U.$$.fragment),this.h()},l(m){e=v(m,"DIV",{class:!0});var $=b(e);F(t.$$.fragment,$),a=k($),s=v($,"DIV",{class:!0});var w=b(s);i=v(w,"DIV",{class:!0});var N=b(i);n=D(N,o[2]),N.forEach(p),r=k(w),l=v(w,"DIV",{class:!0});var z=b(l);F(u.$$.fragment,z),f=k(z),F(_.$$.fragment,z),z.forEach(p),L=k(w),y=v(w,"BUTTON",{class:!0});var se=b(y);Q=D(se,"Next"),se.forEach(p),X=k(w),F(U.$$.fragment,w),w.forEach(p),$.forEach(p),this.h()},h(){c(i,"class","login svelte-xhq2ph"),c(l,"class","inner svelte-xhq2ph"),c(y,"class",P=I(`next ${o[1]===!0?"disable":""}`)+" svelte-xhq2ph"),y.disabled=o[1],c(s,"class","container svelte-xhq2ph"),c(e,"class","form svelte-xhq2ph")},m(m,$){g(m,e,$),O(t,e,null),d(e,a),d(e,s),d(s,i),d(i,n),d(s,r),d(s,l),O(u,l,null),d(l,f),O(_,l,null),d(s,L),d(s,y),d(y,Q),d(s,X),O(U,s,null),q=!0,Y||(te=V(y,"click",o[4]),Y=!0)},p(m,[$]){const w={};$&1&&(w.message=m[0]),t.$set(w),(!q||$&4)&&ee(n,m[2]),(!q||$&2&&P!==(P=I(`next ${m[1]===!0?"disable":""}`)+" svelte-xhq2ph"))&&c(y,"class",P),(!q||$&2)&&(y.disabled=m[1]);const N={};$&2&&(N.disable_button=m[1]),U.$set(N)},i(m){q||(C(t.$$.fragment,m),C(u.$$.fragment,m),C(_.$$.fragment,m),C(U.$$.fragment,m),q=!0)},o(m){W(t.$$.fragment,m),W(u.$$.fragment,m),W(_.$$.fragment,m),W(U.$$.fragment,m),q=!1},d(m){m&&p(e),j(t),j(u),j(_),j(U),Y=!1,te()}}}function qe(o,e,t){let a,s,i;S(o,x,_=>t(6,a=_)),S(o,Z,_=>t(7,s=_)),S(o,K,_=>t(2,i=_));let n="",r=!1,l=!1;const u=async()=>{try{t(0,n="Please wait"),G.set("true");const _=await ye(i,s,a);i!=="Admin Login"&&_!==void 0&&(de.set(_.user.uid),ue.post("/api/users",{email:s,password:a})),Z.set(""),x.set(""),r=!0}catch(_){t(0,n=`${_.code}`);const L=n.slice(5,n.length);t(0,n=L.toUpperCase()),G.set("true")}setTimeout(()=>{G.set("false"),r===!0&&(r=!1,fe("/halls"),_e.set(!0))},4e3)};return[n,l,i,u,()=>{t(1,l=!0),u(),setTimeout(()=>{t(1,l=!1)},5e3)}]}class Se extends H{constructor(e){super(),J(this,e,qe,De,M,{})}}export{Se as U};
